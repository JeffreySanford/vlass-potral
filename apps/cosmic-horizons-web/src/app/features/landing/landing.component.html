<div class="landing-container">
  @if (showTelemetryOverlay) {
    <aside
      class="sky-meta-panel"
      [class.compact]="telemetryCompact"
      aria-label="Sky background telemetry"
    >
      <button
        type="button"
        class="telemetry-toggle"
        (click)="onTelemetryControl()"
        [attr.aria-label]="
          shouldPromptForLocation
            ? 'Detect location and personalize background'
            : telemetryCompact
              ? 'Expand telemetry details'
              : 'Collapse telemetry details'
        "
      >
        @if (locating) {
          <mat-icon class="locating-icon">my_location</mat-icon>
        } @else if (telemetryCompact || shouldPromptForLocation) {
          <mat-icon>info</mat-icon>
        } @else {
          <mat-icon>close_fullscreen</mat-icon>
        }
      </button>
      <p class="telemetry-detail">{{ clockLine }}</p>
      <p class="telemetry-detail">{{ locationLabel }}</p>
      <p class="telemetry-detail">{{ latLonLabel }}</p>
    </aside>
  }
  <mat-toolbar color="primary" class="app-toolbar">
    <mat-icon class="brand-icon">satellite_alt</mat-icon>
    <span class="brand">Cosmic Horizon</span>
    <span class="spacer"></span>
    @if (user.username) {
      <a mat-button routerLink="/profile">
        <mat-icon>account_circle</mat-icon> My Profile
      </a>
    }
    <button mat-flat-button color="warn" (click)="logout()">
      <mat-icon>logout</mat-icon> Logout
    </button>
  </mat-toolbar>

  <div class="content-wrapper">
    <section class="hero">
      <p class="eyebrow">CosmicAI Control Plane</p>
      <h1>Scientific Operations Gateway</h1>
      <p class="subtitle">
        Bridging the human bottleneck via autonomous agent orchestration,
        high-precision ephemeris data, and transparent peer review.
      </p>
      <p class="subtitle caution">
        Enterprise Gateway for NSF-Simons CosmicAI Integration.
      </p>
      <p class="affiliation-note">
        Independent project by Jeffrey Sanford using public VLASS data; not
        affiliated with VLA/NRAO.
      </p>
    </section>

    <mat-card class="welcome-card">
      <mat-card-content>
        <div class="feature-grid">
          @for (pillar of pillars; track pillar.title) {
            <article
              class="feature-card"
              role="button"
              tabindex="0"
              (click)="openPillar(pillar)"
              (keydown.enter)="openPillar(pillar)"
              (keydown.space)="openPillar(pillar)"
            >
              <mat-icon>{{ pillar.icon }}</mat-icon>
              <h2>{{ pillar.title }}</h2>
            </article>
          }
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="welcome-card">
      <mat-card-content>
        <h2>Mission Routes</h2>
        <div class="feature-grid">
          @for (link of visibleRouteLinks; track link.title) {
            <article
              class="feature-card"
              role="button"
              tabindex="0"
              (click)="openRouteLink(link)"
              (keydown.enter)="openRouteLink(link)"
              (keydown.space)="openRouteLink(link)"
            >
              <mat-icon>{{ link.icon }}</mat-icon>
              <h2>{{ link.title }}</h2>
            </article>
          }
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
