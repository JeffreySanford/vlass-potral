<div class="landing-container" [style.--sky-preview-url]="'url(' + preview.imageUrl + ')'">
  @if (showTelemetryOverlay) {
    <aside class="sky-meta-panel" [class.compact]="telemetryCompact" aria-label="Sky background telemetry">
      <button type="button" class="telemetry-toggle" (click)="toggleTelemetryCompact()">
        {{ telemetryCompact ? 'Expand' : 'Compact' }}
      </button>
      <p>{{ clockLine }}</p>
      <p class="telemetry-detail">{{ locationLabel }}</p>
      <p class="telemetry-detail">{{ latLonLabel }}</p>
    </aside>
  }
  <mat-toolbar color="primary" class="app-toolbar">
    <mat-icon class="brand-icon">satellite_alt</mat-icon>
    <span class="brand">VLASS Portal</span>
    <span class="spacer"></span>
    @if (user.username) {
      <a mat-button routerLink="/profile">
        <mat-icon>account_circle</mat-icon> My Profile
      </a>
    }
    <button mat-flat-button color="warn" (click)="logout()">
      <mat-icon>logout</mat-icon> Logout
    </button>
  </mat-toolbar>

  <div class="content-wrapper">
    <section class="hero">
      <p class="eyebrow">CosmicAI Control Plane</p>
      <h1>Scientific Operations Gateway</h1>
      <p class="subtitle">
        Bridging the human bottleneck via autonomous agent orchestration,
        high-precision ephemeris data, and transparent peer review.
      </p>
      <p class="subtitle caution">
        Enterprise Gateway for NSF-Simons CosmicAI Integration.
      </p>
    </section>

    <section class="preview-controls">
      <button mat-stroked-button type="button" (click)="personalizePreview()" [disabled]="locating">
        @if (locating) {
          Detecting location...
        } @else {
          Personalize background
        }
      </button>
      @if (locationMessage) {
        <p class="location-note">{{ locationMessage }}</p>
      }
    </section>

    <mat-card class="welcome-card">
      <mat-card-content>
        <div class="feature-grid">
          @for (pillar of pillars; track pillar.title) {
            <article
              class="feature-card"
              role="button"
              tabindex="0"
              (click)="openPillar(pillar)"
              (keydown.enter)="openPillar(pillar)"
              (keydown.space)="openPillar(pillar)"
            >
              <mat-icon>{{ pillar.icon }}</mat-icon>
              <h2>{{ pillar.title }}</h2>
            </article>
          }
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="welcome-card">
      <mat-card-content>
        <h2>Mission Routes</h2>
        <div class="feature-grid">
          @for (link of visibleRouteLinks; track link.title) {
            <article
              class="feature-card"
              role="button"
              tabindex="0"
              (click)="openRouteLink(link)"
              (keydown.enter)="openRouteLink(link)"
              (keydown.space)="openRouteLink(link)"
            >
              <mat-icon>{{ link.icon }}</mat-icon>
              <h2>{{ link.title }}</h2>
            </article>
          }
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
