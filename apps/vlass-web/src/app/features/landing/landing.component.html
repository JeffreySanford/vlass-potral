<div class="landing-container" [style.--sky-preview-url]="'url(' + preview.imageUrl + ')'">
  @if (showTelemetryOverlay) {
    <aside class="sky-meta-panel" [class.compact]="telemetryCompact" aria-label="Sky background telemetry">
      <button type="button" class="telemetry-toggle" (click)="toggleTelemetryCompact()">
        {{ telemetryCompact ? 'Expand' : 'Compact' }}
      </button>
      <p>{{ clockLine$ | async }}</p>
      <p class="telemetry-detail">{{ locationLabel }}</p>
      <p class="telemetry-detail">{{ latLonLabel }}</p>
    </aside>
  }
  <mat-toolbar color="primary" class="app-toolbar">
    <span class="brand">VLASS Portal</span>
    <span class="spacer"></span>
    @if (isAdmin) {
      <button mat-stroked-button type="button" (click)="openLogs()">Logs</button>
    }
    <button mat-flat-button (click)="logout()">Logout</button>
  </mat-toolbar>

  <div class="content-wrapper">
    <section class="hero">
      <p class="eyebrow">Mission Control</p>
      <h1>Welcome back, {{ user.name }}</h1>
      <p class="subtitle">
        Build the VLASS MVP around three locked pillars: fast SSR landing,
        viewer state sharing, and research notebook publishing.
      </p>
      <p class="subtitle">
        Independent project using public VLASS data. Not affiliated with VLA/NRAO.
      </p>
    </section>

    <section class="preview-controls">
      <button mat-stroked-button type="button" (click)="personalizePreview()" [disabled]="locating">
        @if (locating) {
          Detecting location...
        } @else {
          Personalize background
        }
      </button>
      @if (locationMessage) {
        <p class="location-note">{{ locationMessage }}</p>
      }
    </section>

    <mat-card class="welcome-card">
      <mat-card-content>
        <div class="feature-grid">
          @for (pillar of pillars; track pillar.title) {
            <article
              class="feature-card"
              role="button"
              tabindex="0"
              (click)="openPillar(pillar)"
              (keydown.enter)="openPillar(pillar)"
              (keydown.space)="openPillar(pillar)"
            >
              <mat-icon>{{ pillar.icon }}</mat-icon>
              <h2>{{ pillar.title }}</h2>
            </article>
          }
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
